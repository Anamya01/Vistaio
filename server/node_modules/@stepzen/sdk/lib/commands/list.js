"use strict";
// Copyright IBM Corp. 2020, 2024
Object.defineProperty(exports, "__esModule", { value: true });
const debug = require("debug");
const fetch_1 = require("@stepzen/fetch");
const constants_1 = require("../shared/constants");
const request_1 = require("../shared/request");
exports.default = async (details, account, sdkConfig) => {
    const headers = (0, request_1.getRequestHeaders)(account, sdkConfig);
    debug('stepzen:headers')(headers);
    const response = await (0, fetch_1.default)(`${account.server}${constants_1.ADMIN_LIST_URL}/${details.type}`, {
        headers: headers,
        method: 'GET',
    });
    debug('stepzen:response')(response);
    if (response.status >= 400 && response.status < 500) {
        throw new Error('Could not complete the request. Please check your authentication details are correct.');
    }
    const text = await response.text();
    let json;
    try {
        json = JSON.parse(text);
    }
    catch {
        throw new Error(`An unexpected error occurred.\n\n${text}`);
    }
    return json;
};
//# sourceMappingURL=list.js.map