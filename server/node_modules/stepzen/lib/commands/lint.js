"use strict";
// Copyright IBM Corp. 2020, 2024
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@oclif/core");
const transpiler_1 = require("@stepzen/transpiler");
const utils_1 = require("../shared/utils");
const zen_command_1 = require("../shared/zen-command");
class Init extends zen_command_1.default {
    async run() {
        const { flags } = await this.parse(Init);
        // Get the correct directory
        const directory = (0, utils_1.getDirectory)(flags.dir);
        this.log(directory);
        // Take over console.log
        console.log = (msg) => {
            let formatted = msg;
            formatted = formatted.replace(/  +/g, ' ');
            this.log(formatted);
        };
        // Lint
        await (0, transpiler_1.lint)(directory, {
            extensions: await (0, utils_1.getStepZenExtensions)(),
        });
    }
}
exports.default = Init;
Init.description = 'StepZen lint.';
Init.hidden = true;
Init.flags = {
    ...zen_command_1.default.flags,
    dir: core_1.Flags.string({ hidden: true }),
};
//# sourceMappingURL=lint.js.map